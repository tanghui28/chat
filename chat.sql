set names utf8;
DROP DATABASE IF  EXISTS chat;
CREATE DATABASE chat charset=utf8;
USE chat;
#用户表
CREATE TABLE user(
  user_id INT PRIMARY KEY AUTO_INCREMENT,               
  uname VARCHAR(100) UNIQUE NOT NULL,                 #用户名
  password VARCHAR(128) NOT NULL,                     #密码
  gender BOOL NOT NULL DEFAULT 1,                     #性别
  phone CHAR(11) UNIQUE NOT NULL,                     #手机号
  avatar VARCHAR(255) NOT NULL DEFAULT 'male.png',    #头像
  createdAt BIGINT NOT NULL,                          #账号创建日期
  updatedAt BIGINT NOT NULL,                          #账号更新日期
  forbidden BOOL NOT NULL DEFAULT 0                   #是否被禁言
);
INSERT INTO user VALUES(NULL,'尼古拉斯赵四',md5('123456'),1,'18161046533',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'王呈祥',md5('123456'),1,'13628034076',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'RoseTin',md5('123456'),1,'13628034077',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'王重阳',md5('123456'),1,'13628034078',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'TimCook',md5('123456'),1,'13628034079',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'A小王',md5('123456'),1,'13628034060',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'A小唐',md5('123456'),1,'13628034061',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'A小阳',md5('123456'),1,'13628034062',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'A小平',md5('123456'),1,'13628034063',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'B小一',md5('123456'),1,'13628034064',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'B小二',md5('123456'),1,'13628034065',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'B小三',md5('123456'),1,'13628034066',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'C小四',md5('123456'),1,'13628034067',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'C小都',md5('123456'),1,'13628034022',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'C小哦',md5('123456'),1,'13628034023',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'D小五',md5('123456'),1,'13628034068',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'D小六',md5('123456'),1,'13628034069',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'E小七',md5('123456'),1,'13628034050',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'E小八',md5('123456'),1,'13628034051',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'F小九',md5('123456'),1,'13628034052',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'F王二麻子',md5('123456'),1,'13628034053',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'G狗不理',md5('123456'),1,'13628034054',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'G阿毛',md5('123456'),1,'13628034055',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'H小飞',md5('123456'),1,'13628034056',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'I小通',md5('123456'),1,'13628034057',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'J小股',md5('123456'),1,'13628034058',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'J小和',md5('123456'),1,'13628034059',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'K小丽',md5('123456'),1,'13628034034',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'K小狗',md5('123456'),1,'13628034035',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'L小狗',md5('123456'),1,'13628034036',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'Z小狗',md5('123456'),1,'13628034037',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'Z小狗',md5('123456'),1,'13628034038',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'Z小狗',md5('123456'),1,'13628034039',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'Z小狗',md5('123456'),1,'13628034012',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'Z小狗',md5('123456'),1,'13628034013',DEFAULT,1566954954196,1566954954196,DEFAULT);
INSERT INTO user VALUES(NULL,'Z小狗',md5('123456'),1,'13628034014',DEFAULT,1566954954196,1566954954196,DEFAULT);
#好友关系表
CREATE  TABLE user_friend(
  user_id INT NOT NULL,
  friend_id INT NOT NULL,
  createdAt BIGINT NOT NULL,
  FOREIGN KEY(user_id) REFERENCES user(user_id),
  FOREIGN KEY(friend_id) REFERENCES user(user_id)
);
INSERT INTO user_friend VALUES(1,2,1566954954196),
(1,3,1566954954196),
(1,4,1566954954196),
(1,5,1566954954196);

#用户动态表
CREATE TABLE user_news(
  news_id INT PRIMARY KEY AUTO_INCREMENT,
  news_detail VARCHAR(255) NOT NULL,
  news_img VARCHAR(255) NOT NULL DEFAULT "",
  user_id INT NOT NULL,
  createdAt BIGINT NOT NULL,
  updatedAt BIGINT NOT NULL,
  FOREIGN KEY(user_id) REFERENCES user(user_id)
);
#动态回复表
CREATE TABLE news_reply(
  rid INT PRIMARY KEY AUTO_INCREMENT,
  reply_detail VARCHAR(255) NOT NULL,
  createdAt BIGINT NOT NULL,
  user_id INT NOT NULL,
  news_id INT NOT NULL,
  FOREIGN KEY(news_id) REFERENCES user_news(news_id),
  FOREIGN KEY(user_id) REFERENCES user(user_id)
);